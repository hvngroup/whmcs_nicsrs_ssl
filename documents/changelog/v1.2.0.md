# NicSRS SSL Admin Module v1.2.0
## Directory Structure & Installation Guide

### Author: HVN GROUP (https://hvn.vn)

---

## Complete Directory Structure

```
modules/addons/nicsrs_ssl_admin/
│
├── nicsrs_ssl_admin.php              # [File 1] Main entry point
├── hooks.php                          # WHMCS hooks (optional)
│
├── lib/
│   ├── Controller/
│   │   ├── BaseController.php         # [File 2] Abstract base controller
│   │   ├── DashboardController.php    # [File 3] Dashboard controller
│   │   ├── ProductController.php      # [File 4] Product controller
│   │   ├── OrderController.php        # [File 5, 5b] Order controller
│   │   └── SettingsController.php     # [File 6] Settings controller
│   │
│   ├── Service/
│   │   ├── NicsrsApiService.php       # [File 7] API communication
│   │   ├── ProductService.php         # [File 8] Product business logic
│   │   ├── OrderService.php           # Order business logic (similar to ProductService)
│   │   └── ActivityLogger.php         # [File 9] Audit logging
│   │
│   └── Helper/
│       ├── ViewHelper.php             # [File 10] Template helpers
│       └── Pagination.php             # [File 10b] Pagination utility
│
├── templates/
│   ├── dashboard.php                  # [File 11] Dashboard template
│   ├── products/
│   │   └── list.php                   # [File 12] Products list
│   ├── orders/
│   │   ├── list.php                   # [File 13] Orders list
│   │   └── detail.php                 # [File 14] Order detail
│   └── settings.php                   # [File 15, 15b] Settings page
│
├── assets/
│   ├── css/
│   │   └── admin.css                  # [File 16] Ant Design styles
│   └── js/
│       └── admin.js                   # [File 17] Main JavaScript
│
└── lang/
    ├── english.php                    # [File 18] English translations
    └── vietnamese.php                 # [File 18] Vietnamese translations
```

---

## Installation Steps

### Step 1: Upload Files

Upload the entire `nicsrs_ssl_admin` folder to:
```
/your_whmcs_root/modules/addons/nicsrs_ssl_admin/
```

### Step 2: Set Permissions

```bash
# Set directory permissions
find /path/to/whmcs/modules/addons/nicsrs_ssl_admin -type d -exec chmod 755 {} \;

# Set file permissions  
find /path/to/whmcs/modules/addons/nicsrs_ssl_admin -type f -exec chmod 644 {} \;
```

### Step 3: Activate Module

1. Login to WHMCS Admin Panel
2. Navigate to **Setup → Addon Modules**
3. Find **NicSRS SSL Admin** and click **Activate**
4. Click **Configure** and enter your **NicSRS API Token**
5. Set **Items Per Page** preference
6. Click **Save Changes**

### Step 4: Verify Installation

1. Go to **Addons → NicSRS SSL Admin**
2. You should see the Dashboard
3. Click "Test API Connection" in Settings to verify

---

## Database Tables Created

On activation, the module creates 3 tables:

| Table | Purpose |
|-------|---------|
| `mod_nicsrs_products` | Cache synced products from NicSRS API |
| `mod_nicsrs_activity_log` | Audit log for admin actions |
| `mod_nicsrs_settings` | Module settings storage |

---

## File Dependencies

```
nicsrs_ssl_admin.php
├── lib/Controller/BaseController.php
│   ├── lib/Service/ActivityLogger.php
│   └── lib/Helper/ViewHelper.php
│
├── lib/Controller/DashboardController.php
│   └── lib/Service/NicsrsApiService.php
│
├── lib/Controller/ProductController.php
│   ├── lib/Service/NicsrsApiService.php
│   ├── lib/Service/ProductService.php
│   └── lib/Helper/Pagination.php
│
├── lib/Controller/OrderController.php
│   ├── lib/Service/NicsrsApiService.php
│   └── lib/Helper/Pagination.php
│
└── lib/Controller/SettingsController.php
    └── lib/Service/NicsrsApiService.php
```

---

## API Endpoints Used

| Endpoint | Method | Used For |
|----------|--------|----------|
| `/productList` | POST | Fetch products with pricing |
| `/collect` | POST | Get certificate status |
| `/cancel` | POST | Cancel certificate order |
| `/revoke` | POST | Revoke issued certificate |
| `/reissue` | POST | Reissue certificate |
| `/renew` | POST | Renew certificate |
| `/DCVemail` | POST | Resend DCV email |

---

## Features Summary

### Dashboard
- Statistics cards (total, pending, issued, expiring)
- Status distribution pie chart
- Monthly orders bar chart
- Recent orders table
- Expiring certificates list

### Products
- Fetch & cache products from NicSRS API
- Filter by vendor and validation type
- Search products
- Sync individual vendor or all vendors

### Orders
- List all SSL orders with pagination
- Filter by status
- Search by domain, client, email
- View order details
- Certificate actions: Refresh, Cancel, Revoke, Reissue, Renew
- Domain validation status
- Activity log per order

### Settings
- API connection test
- Notification settings
- Auto-sync configuration
- Display preferences
- Activity log management (view, export, clear)

---

## Version History

| Version | Date | Changes |
|---------|------|---------|
| 1.2.0 | 2025-01 | Initial release with full admin features |

---

## Support

- **Website**: https://hvn.vn
- **Email**: support@hvn.vn
- **Documentation**: https://hvn.vn/docs/nicsrs-ssl

---

**© 2025 HVN GROUP. All rights reserved.**